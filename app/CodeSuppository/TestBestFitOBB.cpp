#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <assert.h>

#include "TestBestFitOBB.h"

#include "RenderDebug.h"
#include "FloatMath.h"
#include "rand.h"
#include "shared/MeshSystem/MeshSystemHelper.h"
using namespace NVSHARE;

#define TEST_POINTS 1

#if TEST_POINTS

float points[367*6] = {
	-138.894821167,67.035644531,17.634857178,    -139.894821167,67.035644531,17.634857178,
	-138.894821167,67.035644531,27.316459656,    -139.894821167,67.035644531,27.316459656,
	-138.894821167,67.035644531,36.998062134,    -139.894821167,67.035644531,36.998062134,
	-138.894821167,67.035644531,46.679660797,    -139.894821167,67.035644531,46.679660797,
	-138.894821167,67.035644531,56.361263275,    -139.894821167,67.035644531,56.361263275,
	-138.894821167,67.035644531,66.042869568,    -139.894821167,67.035644531,66.042869568,
	-138.894821167,67.035644531,75.724464417,    -139.894821167,67.035644531,75.724464417,
	-138.894821167,67.035644531,85.406066895,    -139.894821167,67.035644531,85.406066895,
	-138.894821167,67.035644531,95.087669373,    -139.894821167,67.035644531,95.087669373,
	-138.894821167,67.035644531,104.770286560,    -139.894821167,67.035644531,104.770286560,
	-138.894821167,67.035644531,114.453018188,    -139.894821167,67.035644531,114.453018188,
	-138.894821167,67.035644531,124.135757446,    -139.894821167,67.035644531,124.135757446,
	-138.894821167,67.035644531,133.818496704,    -139.894821167,67.035644531,133.818496704,
	102.751464844,67.648208618,49.442409515,    103.198677063,66.753776550,49.442409515,
	102.751464844,67.648208618,45.673152924,    103.198677063,66.753776550,45.673152924,
	102.751464844,67.648208618,41.903892517,    103.198677063,66.753776550,41.903892517,
	102.751464844,67.648208618,38.134635925,    103.198677063,66.753776550,38.134635925,
	102.750648499,67.646842957,34.365390778,    103.178703308,66.743087769,34.366508484,
	102.749542236,67.644599915,30.596122742,    103.196754456,66.750175476,30.596242905,
	102.748947144,67.643791199,26.826864243,    103.196159363,66.749366760,26.826984406,
	102.748344421,67.642982483,23.057605743,    103.195556641,66.748558044,23.057725906,
	102.747741699,67.642173767,19.288349152,    103.194953918,66.747749329,19.288469315,
	104.452766418,67.598556519,23.057605743,    104.005554199,66.704132080,23.057605743,
	104.452766418,67.598556519,19.288347244,    104.005554199,66.704132080,19.288347244,
	104.448951721,67.598304749,49.442409515,    104.003677368,66.702911377,49.442409515,
	104.448951721,67.598304749,45.673152924,    104.003677368,66.702911377,45.673152924,
	104.448951721,67.598304749,41.903892517,    104.003677368,66.702911377,41.903892517,
	104.448951721,67.598304749,38.134635925,    104.003677368,66.702911377,38.134635925,
	104.448951721,67.598304749,34.365379333,    104.003677368,66.702911377,34.365379333,
	104.450355530,67.598373413,30.596118927,    104.008071899,66.701499939,30.595932007,
	104.451766968,67.598464966,26.826860428,    104.009483337,66.701591492,26.826673508,
	102.751464844,67.648208618,83.374290466,    103.198677063,66.753776550,83.374290466,
	102.751464844,67.648208618,79.604064941,    103.198677063,66.753776550,79.604064941,
	102.751464844,67.648208618,75.833831787,    103.198677063,66.753776550,75.833831787,
	102.751464844,67.648208618,72.063606262,    103.198677063,66.753776550,72.063606262,
	102.750633240,67.646858215,68.293380737,    103.178688049,66.743103027,68.294502258,
	102.749465942,67.644569397,64.523139954,    103.196678162,66.750144958,64.523262024,
	102.748863220,67.643760681,60.752914429,    103.196075439,66.749336243,60.753036499,
	102.748260498,67.642944336,56.982685089,    103.195472717,66.748519897,56.982807159,
	102.747665405,67.642135620,53.212455750,    103.194877625,66.747711182,53.212577820,
	104.452766418,67.598556519,56.982685089,    104.005554199,66.704132080,56.982685089,
	104.452766418,67.598556519,53.212455750,    104.005554199,66.704132080,53.212455750,
	104.448951721,67.598304749,83.374290466,    104.003677368,66.702911377,83.374290466,
	104.448951721,67.598304749,79.604064941,    104.003677368,66.702911377,79.604064941,
	104.448951721,67.598304749,75.833831787,    104.003677368,66.702911377,75.833831787,
	104.448951721,67.598304749,72.063606262,    104.003677368,66.702911377,72.063606262,
	104.448951721,67.598304749,68.293373108,    104.003677368,66.702911377,68.293373108,
	104.450355530,67.598373413,64.523147583,    104.008071899,66.701499939,64.522964478,
	104.451766968,67.598457336,60.752914429,    104.009483337,66.701583862,60.752727509,
	-57.925243378,66.370399475,5.081233025,    -57.925243378,65.476943970,5.530377388,
	-57.925243378,66.464187622,6.858827591,    -57.925243378,65.569763184,6.411613941,
	70.958549500,67.545394897,6.755804539,    70.958549500,66.649047852,7.199155807,
	70.958549500,67.660934448,8.534706116,    70.958549500,66.765541077,8.089432716,
	5.190359592,67.432319641,17.397064209,    4.710861683,66.554794312,17.402481079,
	-18.485651016,67.426399231,-4.942090511,    -18.491628647,66.546554565,-4.466866970,
	5.183340549,67.440483093,-26.935359955,    4.709849834,66.559684753,-26.935359955,
	26.013292313,67.427322388,-4.932534695,    26.013292313,66.548835754,-4.454764843,
	3.520581961,67.423957825,18.728679657,    3.994076252,66.543159485,18.728679657,
	-17.270780563,67.426536560,-3.264049530,    -17.273777008,66.547409058,-3.740630150,
	3.519594431,67.418869019,-25.607807159,    3.999095917,66.541343689,-25.613224030,
	27.220075607,67.430366516,-3.266987562,    27.220075607,66.549568176,-3.740481853,
	102.751464844,67.648208618,47.145519257,    103.198677063,66.753776550,47.145519257,
	102.751464844,67.648208618,43.376258850,    103.198677063,66.753776550,43.376258850,
	102.751464844,67.648208618,39.607002258,    103.198677063,66.753776550,39.607002258,
	102.751464844,67.648208618,35.837745667,    103.198677063,66.753776550,35.837745667,
	102.749778748,67.644920349,32.068485260,    103.196990967,66.750495911,32.068607330,
	102.749176025,67.644111633,28.299230576,    103.196388245,66.749687195,28.299350739,
	102.748580933,67.643302917,24.529972076,    103.195793152,66.748878479,24.530092239,
	102.747978210,67.642494202,20.760715485,    103.195190430,66.748069763,20.760835648,
	102.747375488,67.641685486,16.991456985,    103.194587708,66.747261047,16.991577148,
	104.452766418,67.598556519,20.760713577,    104.005554199,66.704132080,20.760713577,
	104.452766418,67.598556519,16.991456985,    104.005554199,66.704132080,16.991456985,
	104.448951721,67.598304749,47.145519257,    104.003677368,66.702911377,47.145519257,
	104.448951721,67.598304749,43.376258850,    104.003677368,66.702911377,43.376258850,
	104.448951721,67.598304749,39.607002258,    104.003677368,66.702911377,39.607002258,
	104.448951721,67.598304749,35.837745667,    104.003677368,66.702911377,35.837745667,
	104.449806213,67.598342896,32.068485260,    104.007522583,66.701469421,32.068298340,
	104.451217651,67.598426819,28.299226761,    104.008934021,66.701553345,28.299039841,
	104.452629089,67.598510742,24.529968262,    104.010345459,66.701637268,24.529781342,
	102.751464844,67.648208618,81.076805115,    103.198677063,66.753776550,81.076805115,
	102.751464844,67.648208618,77.306579590,    103.198677063,66.753776550,77.306579590,
	102.751464844,67.648208618,73.536346436,    103.198677063,66.753776550,73.536346436,
	102.751464844,67.648208618,69.766120911,    103.198677063,66.753776550,69.766120911,
	102.749702454,67.644882202,65.995887756,    103.196914673,66.750457764,65.996009827,
	102.749099731,67.644073486,62.225658417,    103.196311951,66.749649048,62.225780487,
	102.748497009,67.643264771,58.455429077,    103.195709229,66.748840332,58.455551147,
	102.747894287,67.642456055,54.685203552,    103.195106506,66.748031616,54.685325623,
	102.747299194,67.641647339,50.914974213,    103.194511414,66.747222900,50.915096283,
	104.452766418,67.598556519,54.685203552,    104.005554199,66.704132080,54.685203552,
	104.452766418,67.598556519,50.914974213,    104.005554199,66.704132080,50.914974213,
	104.448951721,67.598304749,81.076805115,    104.003677368,66.702911377,81.076805115,
	104.448951721,67.598304749,77.306579590,    104.003677368,66.702911377,77.306579590,
	104.448951721,67.598304749,73.536346436,    104.003677368,66.702911377,73.536346436,
	104.448951721,67.598304749,69.766120911,    104.003677368,66.702911377,69.766120911,
	104.449798584,67.598342896,65.995887756,    104.007514954,66.701469421,65.995704651,
	104.451210022,67.598426819,62.225662231,    104.008926392,66.701553345,62.225475311,
	104.452621460,67.598510742,58.455432892,    104.010337830,66.701637268,58.455245972,
	-62.109264374,66.370399475,5.081233025,    -62.109264374,65.476943970,5.530377388,
	-62.109264374,66.464187622,6.858827591,    -62.109264374,65.569763184,6.411613941,
	66.780113220,67.545394897,6.755804539,    66.780113220,66.649047852,7.199155807,
	66.780113220,67.660934448,8.534706116,    66.780113220,66.765541077,8.089432716,
	5.189412117,67.437217712,18.692102432,    4.715921402,66.556419373,18.692102432,
	-17.304313660,67.422760010,-4.940913200,    -17.304313660,66.544273376,-4.463143349,
	5.184214115,67.435905457,-25.636468887,    4.704716206,66.558380127,-25.641885757,
	27.191825867,67.430679321,-4.933625698,    27.197803497,66.550849915,-4.458374977,
	3.519636393,67.419075012,17.433629990,    3.999137878,66.541549683,17.439046860,
	-18.451395035,67.430366516,-3.266987562,    -18.451395035,66.549568176,-3.740481853,
	3.520581961,67.423957825,-26.905672073,    3.994076252,66.543159485,-26.905672073,
	26.042415619,67.426651001,-3.264133930,    26.045412064,66.547523499,-3.740714550,
	15.692026138,67.410758972,-15.103876114,    15.356290817,66.531776428,-14.765235901,
	19.229574203,67.410064697,-11.598459244,    18.893838882,66.531082153,-11.259819031,
	22.767122269,67.409378052,-8.093042374,    22.431386948,66.530395508,-7.754402637,
	8.618225098,67.412574768,-22.114559174,    8.281521797,66.534294128,-21.775070190,
	12.155015945,67.411636353,-18.609224319,    11.818312645,66.533355713,-18.269735336,
	-13.751902580,67.495117188,-0.067473993,    -13.417138100,66.615333557,-0.404983878,
	-10.217524529,67.495819092,3.436314106,    -9.882760048,66.616035461,3.098804235,
	-6.683350086,67.496627808,6.940631390,    -6.346544743,66.618309021,6.601332188,
	-3.149606705,67.497566223,10.445973396,    -2.812801361,66.619247437,10.106674194,
	0.384136230,67.498504639,13.951314926,    0.720941663,66.620185852,13.612015724,
	14.533623695,67.456893921,-13.946581841,    14.869886398,66.578269958,-14.285627365,
	18.070493698,67.457839966,-10.441205025,    18.406757355,66.579216003,-10.780250549,
	21.607362747,67.458793640,-6.935827732,    21.943626404,66.580169678,-7.274873257,
	7.459583282,67.454605103,-20.956655502,    7.795852661,66.575988770,-21.295707703,
	10.996619225,67.455772400,-17.451656342,    11.332888603,66.577156067,-17.790708542,
	-12.647702217,67.415657043,-1.172068357,    -12.983998299,66.536949158,-0.833282232,
	-9.113957405,67.414718628,2.333268404,    -9.450253487,66.536010742,2.672054529,
	-5.580230713,67.413749695,5.838559151,    -5.916788578,66.535232544,6.177573204,
	-2.046588182,67.412567139,9.343534470,    -2.383146048,66.534049988,9.682548523,
	1.487054229,67.411384583,12.848508835,    1.150496483,66.532867432,13.187522888,
	21.440851212,67.615058899,-1.045271158,    21.772556305,66.748344421,-0.672742605,
	17.903497696,67.767539978,2.459201336,    18.235202789,66.900825500,2.831729889,
	14.363179207,67.864280701,5.960411549,    14.378558159,66.864517212,5.975918293,
	10.833181381,67.677436829,9.471328735,    11.366046906,66.981323242,9.952455521,
	7.295473099,67.473876953,12.976070404,    7.630678654,66.594909668,13.315258026,
	-9.224577904,67.668601990,-10.476489067,    -9.557072639,66.799827576,-10.843467712,
	-12.758137703,67.541221619,-6.973412514,    -13.090632439,66.672447205,-7.340391636,
	1.378660321,67.428558350,-20.995901108,    1.042794347,66.549804688,-21.335004807,
	-2.156682253,67.557975769,-17.489767075,    -2.650489330,66.815742493,-17.942804337,
	22.601133347,67.429618835,0.004831684,    22.266569138,66.549797058,-0.332780927,
	19.063640594,67.430305481,3.508585453,    18.729076385,66.550483704,3.170972824,
	15.526146889,67.430999756,7.012339115,    15.191582680,66.551177979,6.674726486,
	11.989202499,67.431930542,10.517548561,    11.652498245,66.553649902,10.178058624,
	8.452345848,67.432868958,14.022941589,    8.115641594,66.554588318,13.683451653,
	-10.328089714,67.475341797,-11.582347870,    -9.992154121,66.596397400,-11.243811607,
	-13.862446785,67.474655151,-8.076932907,    -13.526511192,66.595710754,-7.738396645,
	0.273689300,67.478004456,-22.098381042,    0.610493898,66.599685669,-21.759082794,
	-3.260073900,67.477050781,-18.593057632,    -2.923269272,66.598731995,-18.253759384,
	-6.793837547,67.476089478,-15.087736130,    -6.457033157,66.597770691,-14.748437881,
	15.531490326,67.427955627,-15.218399048,    15.195755005,66.548973083,-14.879758835,
	19.069038391,67.427261353,-11.712982178,    18.733303070,66.548278809,-11.374341965,
	22.606584549,67.426574707,-8.207565308,    22.270849228,66.547592163,-7.868925571,
	8.457807541,67.429809570,-22.229068756,    8.121104240,66.551528931,-21.889579773,
	11.994597435,67.428871155,-18.723735809,    11.657894135,66.550590515,-18.384246826,
	-13.912306786,67.477912903,-0.181743875,    -13.577542305,66.598129272,-0.519253790,
	-10.377928734,67.478622437,3.322044134,    -10.043164253,66.598838806,2.984534264,
	-6.843654156,67.479393005,6.826117992,    -6.506848812,66.601074219,6.486818790,
	-3.309911013,67.480331421,10.331459999,    -2.973105431,66.602012634,9.992160797,
	0.223831996,67.481269836,13.836801529,    0.560637474,66.602951050,13.497502327,
	14.373227119,67.439682007,-14.061062813,    14.709489822,66.561058044,-14.400108337,
	17.910097122,67.440628052,-10.555685997,    18.246360779,66.562004089,-10.894731522,
	21.446966171,67.441581726,-7.050308704,    21.783229828,66.562957764,-7.389354229,
	7.299161434,67.437362671,-21.071079254,    7.635430813,66.558746338,-21.410131454,
	10.836197853,67.438529968,-17.566080093,    11.172467232,66.559913635,-17.905132294,
	-12.807987213,67.432861328,-1.286544085,    -13.144283295,66.554153442,-0.947757959,
	-9.274242401,67.431922913,2.218792677,    -9.610538483,66.553215027,2.557578802,
	-5.740498066,67.430984497,5.724129200,    -6.076794147,66.552276611,6.062915325,
	-2.206857681,67.429817200,9.229113579,    -2.543415546,66.551300049,9.568127632,
	1.326784849,67.428634644,12.734088898,    0.990227044,66.550117493,13.073102951,
	21.556802750,67.590950012,-1.204609394,    21.888507843,66.724235535,-0.832080841,
	18.019449234,67.743431091,2.299863100,    18.351154327,66.876716614,2.672391653,
	14.479046822,67.863586426,5.800940514,    14.494425774,66.863822937,5.816447258,
	10.949225426,67.656112671,9.311959267,    11.482090950,66.959999084,9.793086052,
	7.411449432,67.456588745,12.816672325,    7.746654987,66.577621460,13.155859947,
	-9.108798027,67.691566467,-10.635765076,    -9.441292763,66.822792053,-11.002743721,
	-12.642357826,67.564186096,-7.132688522,    -12.974852562,66.695411682,-7.499667645,
	1.494379997,67.445838928,-21.155294418,    1.158514023,66.567085266,-21.494398117,
	-2.041019917,67.578277588,-17.649101257,    -2.534826994,66.836044312,-18.102138519,
	22.716974258,67.446762085,-0.154636741,    22.382410049,66.566940308,-0.492249340,
	19.179479599,67.447448730,3.349117041,    18.844915390,66.567626953,3.011504412,
	15.641986847,67.448143005,6.852870464,    15.307422638,66.568321228,6.515257835,
	12.105093002,67.449096680,10.358208656,    11.768388748,66.570816040,10.018718719,
	8.568236351,67.450035095,13.863601685,    8.231532097,66.571754456,13.524111748,
	-10.212369919,67.458206177,-11.741682053,    -9.876434326,66.579261780,-11.403145790,
	-13.746726990,67.457511902,-8.236268044,    -13.410791397,66.578567505,-7.897731781,
	0.389456064,67.460838318,-22.257722855,    0.726260662,66.582519531,-21.918424606,
	-3.144307137,67.459884644,-18.752401352,    -2.807502508,66.581565857,-18.413103104,
	-6.678070545,67.458930969,-15.247077942,    -6.341266155,66.580612183,-14.907779694,
	-4.677816391,67.779670715,-13.376311302,    -4.994780540,66.885765076,-13.059347153,
	10.093809128,67.777801514,1.380693674,    9.775793076,66.884841919,1.699273705,
	-1.356985331,67.788703918,-9.622614861,    -1.039570808,66.895118713,-9.940029144,
	13.342540741,67.765235901,5.127238750,    13.658699036,66.870956421,4.810519695,
	-3.840844154,67.295349121,-13.912934303,    -4.156584740,66.400253296,-13.598115921,
	10.928453445,67.293159485,0.851587415,    10.611039162,66.399574280,1.169001937,
	-2.186683416,67.304458618,-9.089066505,    -1.869268894,66.410873413,-9.406480789,
	12.511069298,67.283760071,5.661262989,    12.826536179,66.388793945,5.345797539,
	-0.633702457,67.276359558,-10.751631737,    -0.950666785,66.382453918,-10.434667587,
	14.136987686,67.276657104,4.012044430,    13.818971634,66.383697510,4.330624580,
	-5.400475025,67.286506653,-12.252322197,    -5.083062649,66.392921448,-12.569735527,
	9.299982071,67.268447876,2.494559526,    9.616140366,66.374168396,2.177840710,
	-0.992058933,67.531509399,-10.390413284,    -1.309023261,66.637603760,-10.073449135,
	13.778594971,67.532417297,4.371149063,    13.460578918,66.639457703,4.689729214,
	-5.042044640,67.541160583,-12.610787392,    -4.724632263,66.647575378,-12.928200722,
	9.658058167,67.521980286,2.136132956,    9.974216461,66.627700806,1.819414139,
	5.051517010,66.294319153,14.049380302,    5.755467415,66.294319153,14.759629250,
	9.217282295,66.296051025,9.920558929,    9.921232224,66.296051025,10.630807877,
	-3.176826000,66.296768188,-15.437287331,    -3.881563663,66.296768188,-16.146755219,
	0.979896426,66.295448303,-19.566297531,    0.275158703,66.295448303,-20.275764465,
	15.638884544,66.296508789,3.543919325,    16.342863083,66.296508789,4.254140854,
	19.803958893,66.294784546,-0.584542096,    20.507936478,66.294784546,0.125679433,
	-13.903507233,66.294555664,-4.792372704,    -14.607875824,66.294555664,-5.502207279,
	-9.743200302,66.297698975,-8.920644760,    -10.447568893,66.297698975,-9.630478859,
	-13.802437782,66.296096802,-3.310589552,    -14.506968498,66.296096802,-2.600916386,
	-9.065688133,66.296096802,1.391837239,    -9.770218849,66.296096802,2.101510525,
	-4.328938961,66.296096802,6.094264030,    -5.033470154,66.296096802,6.803937435,
	0.407810152,66.296096802,10.796689987,    -0.296720862,66.296096802,11.506362915,
	19.412094116,66.296096802,-8.009796143,    20.116281509,66.296096802,-8.719809532,
	5.187781811,66.296096802,-22.117404938,    5.891969681,66.296096802,-22.827419281,
	9.929219246,66.296096802,-17.414869308,    10.633407593,66.296096802,-18.124881744,
	14.670657158,66.296096802,-12.712331772,    15.374845505,66.296096802,-13.422345161,
	22.838798523,66.283790588,0.802798569,    22.134906769,66.283790588,0.092492223,
	6.582117558,66.283790588,16.912687302,    5.878224850,66.283790588,16.202381134,
	10.646286964,66.283790588,12.885214806,    9.942394257,66.283790588,12.174908638,
	14.710456848,66.283790588,8.857743263,    14.006564140,66.283790588,8.147437096,
	18.774627686,66.283790588,4.830270767,    18.070735931,66.283790588,4.119964600,
	-12.726456642,66.283790588,2.154120922,    -12.022243500,66.283790588,1.444132566,
	-8.665956497,66.283790588,6.181592941,    -7.961743355,66.283790588,5.471604347,
	-4.605456352,66.283790588,10.209064484,    -3.901242971,66.283790588,9.499075890,
	-0.544955850,66.283790588,14.236536980,    0.159257472,66.283790588,13.526548386,
	-16.786956787,66.283790588,-1.873351216,    -16.082742691,66.283790588,-2.583339691,
	6.582116127,66.283782959,-25.116022110,    5.878061771,66.283782959,-24.405876160,
	10.646285057,66.283706665,-21.086715698,    9.942230225,66.283706665,-20.376569748,
	14.710454941,66.283630371,-17.057407379,    14.006401062,66.283630371,-16.347261429,
	18.774625778,66.283554077,-13.028100967,    18.070571899,66.283554077,-12.317955017,
	22.838794708,66.283493042,-8.998793602,    22.134740829,66.283493042,-8.288647652,
	-16.786954880,66.283493042,-6.321424484,    -16.082580566,66.283493042,-5.611596584,
	-12.726454735,66.283500671,-10.350731850,    -12.022079468,66.283500671,-9.640903473,
	-8.665954590,66.283576965,-14.380038261,    -7.961579323,66.283576965,-13.670209885,
	-4.605454445,66.283653259,-18.409343719,    -3.901079416,66.283653259,-17.699516296,
	-0.544954181,66.283729553,-22.438652039,    0.159420848,66.283729553,-21.728824615,
	11.983613014,66.296768188,7.178761959,    12.687562943,66.296768188,7.889011383,
	7.817846298,66.295471191,11.307584763,    8.521796227,66.295471191,12.017833710,
	-0.416502416,66.296028137,-18.179208755,    -1.121240139,66.296028137,-18.888675690,
	3.740219593,66.294296265,-22.308218002,    3.035481930,66.294296265,-23.017684937,
	18.404754639,66.295364380,0.802362919,    19.108732224,66.295364380,1.512584448,
	22.569828033,66.294036865,-3.326098442,    23.273805618,66.294036865,-2.615876913,
	-11.140803337,66.296638489,-7.533802986,    -11.845171928,66.296638489,-8.243637085,
	-6.980442524,66.299034119,-11.662128448,    -7.684811115,66.299034119,-12.371962547,
	-10.656940460,66.296096802,-0.187884301,    -11.361471176,66.296096802,0.521788955,
	-5.920190811,66.296096802,4.514542580,    -6.624722004,66.296096802,5.224215984,
	-1.183441520,66.296096802,9.216968536,    -1.887972593,66.296096802,9.926641464,
	3.553307533,66.296096802,13.919395447,    2.848776579,66.296096802,14.629068375,
	22.560705185,66.296096802,-4.887017727,    23.264892578,66.296096802,-5.597031116,
	8.336392403,66.296096802,-18.994626999,    9.040580750,66.296096802,-19.704639435,
	13.077830315,66.296096802,-14.292090416,    13.782018661,66.296096802,-15.002103806,
	17.819267273,66.296096802,-9.589553833,    18.523454666,66.296096802,-10.299567223,
	25.537660599,66.283790588,-1.871694684,    24.833768845,66.283790588,-2.582000971,
	9.280980110,66.283790588,14.238193512,    8.577087402,66.283790588,13.527887344,
	13.345149994,66.283790588,10.210721970,    12.641257286,66.283790588,9.500415802,
	17.409320831,66.283790588,6.183249474,    16.705429077,66.283790588,5.472943306,
	21.473489761,66.283790588,2.155777693,    20.769598007,66.283790588,1.445471287,
	-10.030031204,66.283790588,4.828613758,    -9.325818062,66.283790588,4.118625641,
	-5.969530582,66.283790588,8.856085777,    -5.265317440,66.283790588,8.146097183,
	-1.909030080,66.283790588,12.883558273,    -1.204816818,66.283790588,12.173569679,
	2.151470184,66.283790588,16.911031723,    2.855683565,66.283790588,16.201044083,
	-14.090531349,66.283790588,0.801141977,    -13.386318207,66.283790588,0.091153622,
	9.280978203,66.283729553,-22.440309525,    8.576923370,66.283729553,-21.730163574,
	13.345148087,66.283653259,-18.411003113,    12.641094208,66.283653259,-17.700857162,
	17.409318924,66.283576965,-14.381696701,    16.705265045,66.283576965,-13.671550751,
	21.473487854,66.283500671,-10.352389336,    20.769433975,66.283500671,-9.642243385,
	25.537656784,66.283493042,-6.323081970,    24.833602905,66.283493042,-5.612936020,
	-14.090529442,66.283493042,-8.997136116,    -13.386154175,66.283493042,-8.287307739,
	-10.030029297,66.283546448,-13.026443481,    -9.325654030,66.283546448,-12.316615105,
	-5.969528675,66.283622742,-17.055749893,    -5.265153885,66.283622742,-16.345922470,
	-1.909028530,66.283706665,-21.085056305,    -1.204653502,66.283706665,-20.375228882,
	2.151471853,66.283782959,-25.114362717,    2.855846882,66.283782959,-24.404535294,
	-20.421220779,63.886787415,-2.523395300,    -20.425817490,63.886787415,-3.523384809,
	-18.734088898,63.886787415,-2.531151533,    -18.738685608,63.886787415,-3.531141043,
	-20.420965195,63.886783600,-5.672412395,    -20.425561905,63.890045166,-4.672428131,
	-18.733833313,63.886783600,-5.664656162,    -18.738430023,63.890045166,-4.664671898,
	5.947744846,63.886840820,21.280988693,    4.947823524,63.892288208,21.292285919,
	5.925203800,63.886787415,17.905366898,    4.925225735,63.886787415,17.911989212,
	5.936380863,63.886787415,19.593168259,    4.936402798,63.886787415,19.599790573,
	2.808590651,63.886810303,17.905246735,    3.808566570,63.888938904,17.911869049,
	2.797413826,63.886810303,19.593048096,    3.797389507,63.888938904,19.599670410,
	2.786237001,63.886810303,21.280849457,    3.786212921,63.888938904,21.287471771,
	26.525465012,63.886783600,-5.660236359,    26.530061722,63.890045166,-4.660252094,
	28.212583542,63.886783600,-5.667992592,    28.217180252,63.890045166,-4.668008327,
	29.899703979,63.886783600,-5.675748825,    29.904300690,63.890045166,-4.675764561,
	26.525465012,63.886795044,-2.535289288,    26.530061722,63.887485504,-3.535278320,
	28.212585449,63.886795044,-2.527533054,    28.217182159,63.887485504,-3.527522087,
	29.899703979,63.886795044,-2.519776583,    29.904300690,63.887485504,-3.519765854,
	5.943741322,63.886810303,-28.776769638,    4.943765640,63.888938904,-28.783391953,
	5.932563782,63.886810303,-27.088886261,    4.932588100,63.888938904,-27.095508575,
	2.791794062,63.886787415,-28.776899338,    3.791772127,63.886787415,-28.783521652,
	2.802971363,63.886787415,-27.089017868,    3.802949429,63.886787415,-27.095640182,
	-20.421186447,64.421241760,-2.523338318,    -20.427474976,64.423133850,-3.523316622,
	-18.734088898,64.421226501,-2.531151533,    -18.738685608,64.421226501,-3.531141043,
	-20.420629501,64.421173096,-5.674154282,    -20.425226212,64.424438477,-4.674170017,
	-18.733497620,64.421173096,-5.666397572,    -18.738094330,64.424438477,-4.666413307,
	5.925203800,64.421226501,17.905366898,    4.925225735,64.421226501,17.911989212,
	5.936380863,64.421226501,19.593168259,    4.936402798,64.421226501,19.599790573,
	2.796277761,64.421249390,19.592889786,    3.796253681,64.423377991,19.599512100,
	2.807895184,64.421226501,17.905197144,    3.807831287,64.421226501,17.916494370,
	26.525323868,64.421142578,-5.661390781,    26.537900925,64.421142578,-4.661469936,
	28.212249756,64.421173096,-5.669734478,    28.216846466,64.424438477,-4.669750214,
	28.212251663,64.421234131,-2.527164936,    28.216848373,64.421928406,-3.527153969,
	26.525260925,64.421226501,-2.535045385,    26.531549454,64.421226501,-3.535025597,
	5.944877625,64.421249390,-28.776597977,    4.944901943,64.423377991,-28.783220291,
	5.933700085,64.421249390,-27.088716507,    4.933724403,64.423377991,-27.095338821,
	2.791794062,64.421226501,-28.776899338,    3.791772127,64.421226501,-28.783521652,
	2.802971363,64.421226501,-27.089017868,    3.802949429,64.421226501,-27.095640182,
	4.178541183,98.965354919,-3.358058691,    4.178541183,99.542648315,-2.541521549,
	4.178540230,98.965354919,-4.845553875,    4.178540230,99.542648315,-5.662090778,
	3.623948097,98.965347290,-4.219048977,    2.807272911,99.542442322,-4.219048977,
	5.111444473,98.965354919,-4.219048977,    5.927843094,99.542846680,-4.219048977,
	22.752597809,74.024345398,-10.006411552,    23.569911957,74.600540161,-10.006411552,
	22.752201080,74.024909973,7.136126041,    23.569515228,74.601104736,7.136126041,
	-14.000284195,74.024353027,-10.006410599,    -14.817064285,74.601303101,-10.006410599,
	-13.999888420,74.024917603,7.136126518,    -14.816668510,74.601867676,7.136126518,
	-1.391661286,74.024841309,14.274832726,    -1.391661286,74.602027893,15.091443062,
	15.750133514,74.024841309,14.274832726,    15.750133514,74.602027893,15.091443062,
	-1.392310381,74.024002075,-22.478828430,    -1.392310381,74.600952148,-23.295608521,
	15.749484062,74.024002075,-22.478828430,    15.749484062,74.600952148,-23.295608521,
	25.984212875,69.448860168,10.116275787,    26.800943375,70.025878906,10.115914345,
	-17.231237411,69.448860168,10.116275787,    -18.047967911,70.025878906,10.115914345,
	-17.234525681,69.448554993,-24.169242859,    -18.051170349,70.025695801,-24.169137955,
	25.986883163,69.448554993,-24.169240952,    26.803638458,70.025535583,-24.168806076,
	25.976423264,69.451446533,-7.026101112,    26.793737411,70.027641296,-7.026101112,
	-17.230443954,69.451454163,-7.026100636,    -18.047224045,70.028404236,-7.026100636,
	18.726402283,69.448860168,17.505970001,    18.726039886,70.025878906,18.322700500,
	-15.554018021,69.448921204,17.509140015,    -15.554018021,70.026107788,18.325750351,
	1.587776542,69.448921204,17.509140015,    1.587776542,70.026107788,18.325750351,
	-15.554672241,69.448577881,-25.712785721,    -15.554567337,70.025718689,-26.529430389,
	18.726402283,69.448348999,-25.709953308,    18.726039886,70.025367737,-26.526683807,
	1.580986977,69.451408386,-25.708774567,    1.580986977,70.028358459,-26.525554657,
	22.752511978,74.024833679,12.861458778,    23.568748474,74.602546692,12.860622406,
	-14.000688553,74.023895264,-21.423629761,    -14.817334175,74.601036072,-21.423524857,
	22.753244400,74.023895264,-21.423627853,    23.569999695,74.600875854,-21.423192978,
	22.752464294,74.024536133,-4.281071663,    23.569778442,74.600730896,-4.281071663,
	-13.999567032,74.024803162,12.861479759,    -14.818047523,74.599334717,12.862806320,
	-14.000152588,74.024543762,-4.281071186,    -14.816932678,74.601493835,-4.281071186,
	21.474617004,74.024826050,14.274278641,    21.474254608,74.601844788,15.091009140,
	-12.808364868,74.024841309,14.274832726,    -12.808364868,74.602027893,15.091443062,
	4.333430290,74.024841309,14.274832726,    4.333430290,74.602027893,15.091443062,
	-12.808827400,74.023918152,-22.478950500,    -12.808722496,74.601058960,-23.295595169,
	21.474615097,74.023712158,-22.478681564,    21.474252701,74.600730896,-23.295412064,
	4.332781315,74.024002075,-22.478828430,    4.332781315,74.600952148,-23.295608521,
	25.986761093,69.448905945,15.941916466,    26.803491592,70.025924683,15.941555023,
	-17.233785629,69.448905945,15.941916466,    -18.050516129,70.025924683,15.941555023,
	-17.233034134,69.449607849,-18.343235016,    -18.049678802,70.026748657,-18.343130112,
	25.983041763,69.449607849,-18.343233109,    26.799797058,70.026588440,-18.342798233,
	25.976289749,69.451637268,-1.200317025,    26.793603897,70.027832031,-1.200317025,
	-17.230308533,69.451644897,-1.200316548,    -18.047088623,70.028594971,-1.200316548,
	24.554990768,69.448905945,17.508518219,    24.554628372,70.025924683,18.325248718,
	-9.728486061,69.448921204,17.509140015,    -9.728486061,70.026107788,18.325750351,
	7.407823563,69.451126099,17.500101089,    7.409020424,70.025138855,18.318948746,
	-9.731418610,69.449623108,-25.711296082,    -9.731313705,70.026763916,-26.527940750,
	24.554988861,69.448287964,-25.712574005,    24.554626465,70.025306702,-26.529304504,
	7.406518459,69.451408386,-25.708774567,    7.406518459,70.028358459,-26.525554657,
	22.752727509,74.024162292,-15.664787292,    23.570041656,74.600357056,-15.664787292,
	22.752332687,74.024726868,1.477749348,    23.569646835,74.600921631,1.477749348,
	-14.000415802,74.024169922,-15.664787292,    -14.817195892,74.601119995,-15.664787292,
	-14.000019073,74.024734497,1.477749825,    -14.816799164,74.601684570,1.477749825,
	-7.049792767,74.024841309,14.274832726,    -7.049792767,74.602027893,15.091443062,
	10.092001915,74.024841309,14.274832726,    10.092001915,74.602027893,15.091443062,
	-7.050441742,74.024002075,-22.478828430,    -7.050441742,74.600952148,-23.295608521,
	10.091352463,74.024002075,-22.478828430,    10.091352463,74.600952148,-23.295608521,
};

#endif

#pragma warning(disable:4100)

void testBestFitOBB(MeshSystemHelper *ms)
{
  gRenderDebug->reset();
  gRenderDebug->pushRenderState();
  gRenderDebug->setCurrentDisplayTime(600.0f);
#if TEST_POINTS

  for (int i=0; i<367; i++)
  {
	  const float *p = &points[i*6];
	  gRenderDebug->debugThickRay(*(const NxVec3 *)p,*(const NxVec3 *)(p+3),0.05f);
  }

#else
  SEND_TEXT_MESSAGE(0,"Demonstrating the best fit OBB algorithm, originally published on June 16, 2006\r\n");

  NxF32 matrix[16];
  NxF32 sides[3];

  if ( ms )
  {
    MeshSystemRaw *mr = ms->getMeshSystemRaw();
    if ( mr && mr->mVcount )
    {
      fm_computeBestFitOBB(mr->mVcount,mr->mVertices,sizeof(NxF32)*3,sides,matrix,true);
      SEND_TEXT_MESSAGE(0,"Generating best fit obb for input mesh with %d vertices.\r\n", mr->mVcount );
      ms->releaseMeshSystemRaw(mr);
    }
    else
    {
      ms = 0;
    }
  }
  if ( !ms )
  {
    NxF32 quat[4];
    fm_eulerToQuat(ranf()*FM_PI,ranf()*FM_PI,ranf()*FM_PI,quat);
    fm_quatToMatrix(quat,matrix);

    #define PCOUNT 60
    NxF32 points[PCOUNT*3] =
    {
    };

    NxF32 *pos = points;

    for (NxI32 i=0; i<PCOUNT; i++)
    {
      NxF32 t[3] = { pos[0], pos[1], pos[2] };
      pos[0] = (NxF32) ((rand()&63)-32)*0.15f;
      pos[1] = (NxF32) ((rand()&63)-32)*0.0015f;
      pos[2] = (NxF32) ((rand()%63)-32)*0.05f;
      fm_transform(matrix,pos,t);

      gRenderDebug->DebugPoint(t,0.1f);

      pos[0] = t[0];
      pos[1] = t[1];
      pos[2] = t[2];

      pos+=3;
    }

    SEND_TEXT_MESSAGE(0,"Generating best fit obb for random set of 60 data points.\r\n");
    fm_computeBestFitOBB(PCOUNT,points,sizeof(NxF32)*3,sides,matrix,true);
  }

  NxF32 bmin[3];
  NxF32 bmax[3];

  bmin[0] = -sides[0]*0.5f;
  bmin[1] = -sides[1]*0.5f;
  bmin[2] = -sides[2]*0.5f;
  bmax[0] = sides[0]*0.5f;
  bmax[1] = sides[1]*0.5f;
  bmax[2] = sides[2]*0.5f;
  gRenderDebug->setCurrentColor(0xFFFF00,0xFFFFFF);
  gRenderDebug->DebugOrientedBound(bmin,bmax,matrix);
#endif
  gRenderDebug->popRenderState();
}

